<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WSET Level 3 Wine Randomizer</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f7f4;
            color: #333;
        }
        h1, h2 {
            color: #8b0000;
            text-align: center;
        }
        h1 {
            margin-bottom: 30px;
        }
        h2 {
            margin-top: 30px;
        }
        .container {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        .result {
            background-color: #f1f1f1;
            border-left: 5px solid #8b0000;
            padding: 20px;
            margin: 20px 0;
            font-size: 18px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        button {
            background-color: #8b0000;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #6d0000;
        }
        #resetBtn {
            background-color: #555;
            font-size: 14px;
            padding: 8px 16px;
        }
        #resetBtn:hover {
            background-color: #333;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .history {
            margin-top: 30px;
        }
        .history h3 {
            color: #8b0000;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .history-list {
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        .history-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .history-item:last-child {
            border-bottom: none;
        }
        .category-select {
            margin: 20px 0;
        }
        select {
            padding: 8px;
            font-size: 16px;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin: 0 5px;
        }
        .tab.active {
            background-color: #8b0000;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .wine-list-container {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            max-height: 500px;
            overflow-y: auto;
        }
        .wine-list-section {
            margin-bottom: 30px;
        }
        .wine-list-section h3 {
            color: #8b0000;
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        .wine-list-item {
            padding: 5px 0;
            border-bottom: 1px dotted #eee;
        }
        .wine-list-region {
            font-weight: bold;
            margin-top: 15px;
            margin-bottom: 8px;
        }
        .wine-list-subregion {
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>WSET Level 3 Wine Randomizer</h1>
        
        <div class="tabs">
            <div class="tab active" onclick="openTab('randomizer')">Wine Randomizer</div>
            <div class="tab" onclick="openTab('browse')">Browse Complete Wine List</div>
        </div>
        
        <div id="randomizer" class="tab-content active">
            <h2>Random Wine Generator</h2>
            
            <div class="category-select">
                <label for="category">Select Wine Type:</label>
                <select id="category">
                    <option value="all">All WSET Level 3 Wines</option>
                    <option value="red">Red Wines</option>
                    <option value="white">White Wines</option>
                    <option value="sparkling">Sparkling Wines</option>
                    <option value="fortified">Fortified Wines</option>
                </select>
            </div>
            
            <div class="category-select">
                <label for="country">Select Country:</label>
                <select id="country">
                    <option value="all">All Countries</option>
                    <!-- Populated dynamically via JavaScript -->
                </select>
            </div>
            
            <div class="category-select">
                <label for="region">Select Region:</label>
                <select id="region">
                    <option value="all">All Regions</option>
                    <!-- Populated dynamically via JavaScript -->
                </select>
            </div>
    
            <div class="result" id="result">
                Your randomly selected wine will appear here
            </div>
    
            <button id="generateBtn">Generate Random Wine</button>
            <button id="resetBtn">Reset History</button>
    
            <div class="history">
                <h3>Previously Selected Wines</h3>
                <div class="history-list" id="historyList">
                    <div class="history-item">No wines selected yet</div>
                </div>
            </div>
        </div>
        
        <div id="browse" class="tab-content">
            <h2>Complete WSET Level 3 Wine List</h2>
            <p>This is the official list of wines from the WSET Level 3 Award in Wines specification (2022 edition).</p>
            
            <div class="wine-list-container" id="wineListContainer">
                <!-- STILL WINES -->
                <div class="wine-list-section">
                    <h3>Still Wines by Country/Region</h3>
                    
                    <!-- FRANCE -->
                    <div class="wine-list-region">FRANCE</div>
                    
                    <div class="wine-list-subregion"><strong>Bordeaux</strong></div>
                    <div class="wine-list-item">Bordeaux, Bordeaux Supérieur</div>
                    <div class="wine-list-item">Côtes de Bordeaux, Entre-Deux-Mers</div>
                    <div class="wine-list-item">Médoc, Haut Médoc, Saint-Estèphe, Pauillac, Margaux, Saint-Julien</div>
                    <div class="wine-list-item">Graves, Pessac-Léognan</div>
                    <div class="wine-list-item">Saint Émilion, Saint-Émilion Grand Cru, Pomerol</div>
                    <div class="wine-list-item">Sauternes, Barsac</div>
                    
                    <div class="wine-list-subregion"><strong>The Dordogne and South West France</strong></div>
                    <div class="wine-list-item">Bergerac, Monbazillac, Cahors, Madiran, Jurançon, Côtes de Gascogne</div>
                    
                    <div class="wine-list-subregion"><strong>Burgundy</strong></div>
                    <div class="wine-list-item">Bourgogne</div>
                    <div class="wine-list-item">Chablis</div>
                    <div class="wine-list-item">Bourgogne Côte d'Or, Bourgogne Hautes Côtes de Nuits, Côte de Nuits-Villages, Gevrey-Chambertin, Vougeot, Vosne-Romanée, Nuits-Saint-Georges</div>
                    <div class="wine-list-item">Bourgogne Hautes Côtes de Beaune, Côte de Beaune-Villages, Aloxe-Corton, Beaune, Pommard, Volnay, Meursault, Puligny-Montrachet, Chassagne-Montrachet</div>
                    <div class="wine-list-item">Bourgogne Côte Chalonnaise, Rully, Mercurey, Givry, Montagny</div>
                    <div class="wine-list-item">Mâcon, Mâcon Villages, Pouilly-Fuissé, Saint-Véran</div>
                    
                    <div class="wine-list-subregion"><strong>Beaujolais</strong></div>
                    <div class="wine-list-item">Beaujolais, Beaujolais Villages, Brouilly, Fleurie, Morgon, Moulin-à-Vent</div>
                    
                    <div class="wine-list-subregion"><strong>Alsace</strong></div>
                    <div class="wine-list-item">Alsace, Alsace Grand Cru</div>
                    
                    <div class="wine-list-subregion"><strong>The Loire Valley</strong></div>
                    <div class="wine-list-item">Muscadet, Muscadet Sèvre et Maine</div>
                    <div class="wine-list-item">Anjou, Coteaux du Layon, Savennières, Saumur, Saumur-Champigny</div>
                    <div class="wine-list-item">Vouvray, Touraine, Bourgueil, Chinon</div>
                    <div class="wine-list-item">Sancerre, Pouilly-Fumé, Menetou-Salon</div>
                    <div class="wine-list-item">Rosé d'Anjou, Cabernet d'Anjou, Rosé de Loire</div>
                    
                    <div class="wine-list-subregion"><strong>The Rhône Valley</strong></div>
                    <div class="wine-list-item">Côtes du Rhône, Côtes du Rhône Villages</div>
                    <div class="wine-list-item">Côte Rôtie, Condrieu, Saint-Joseph, Hermitage, Crozes-Hermitage, Cornas</div>
                    <div class="wine-list-item">Châteauneuf-du-Pape, Gigondas, Vacqueyras, Lirac, Tavel</div>
                    
                    <div class="wine-list-subregion"><strong>Southern France</strong></div>
                    <div class="wine-list-item">Pays d'Oc</div>
                    <div class="wine-list-item">Languedoc, Minervois, Fitou, Corbières, Picpoul de Pinet</div>
                    <div class="wine-list-item">Côtes du Roussillon, Côtes du Roussillon Villages</div>
                    <div class="wine-list-item">Bandol, Côtes de Provence</div>
                    
                    <!-- GERMANY -->
                    <div class="wine-list-region">GERMANY</div>
                    <div class="wine-list-item">Mosel: Bernkastel, Wehlen, Piesport</div>
                    <div class="wine-list-item">Nahe: Schlossböckelheim</div>
                    <div class="wine-list-item">Rheingau: Rüdesheim, Johannisberg</div>
                    <div class="wine-list-item">Rheinhessen: Nierstein</div>
                    <div class="wine-list-item">Pfalz: Forst, Deidesheim</div>
                    <div class="wine-list-item">Baden</div>
                    <div class="wine-list-item">Franken</div>
                    
                    <!-- AUSTRIA -->
                    <div class="wine-list-region">AUSTRIA</div>
                    <div class="wine-list-item">Niederösterreich: Wachau, Weinviertel</div>
                    <div class="wine-list-item">Burgenland</div>
                    
                    <!-- HUNGARY -->
                    <div class="wine-list-region">HUNGARY</div>
                    <div class="wine-list-item">Tokaj (Sweet wines only)</div>
                    
                    <!-- GREECE -->
                    <div class="wine-list-region">GREECE</div>
                    <div class="wine-list-item">Naoussa, Nemea, Santorini</div>
                    
                    <!-- ITALY -->
                    <div class="wine-list-region">ITALY</div>
                    <div class="wine-list-item">Trentino-Alto Adige: Trentino, Alto Adige</div>
                    <div class="wine-list-item">Friuli-Venezia Giulia: Collio, Colli Orientali, Friuli Grave</div>
                    <div class="wine-list-item">Veneto: Pinot Grigio delle Venezie, Veneto, Valpolicella, Valpolicella Classico, Amarone della Valpolicella, Recioto della Valpolicella, Valpolicella Ripasso, Soave, Soave Classico</div>
                    <div class="wine-list-item">Piemonte: Barolo, Barbaresco, Barbera d'Asti, Dolcetto d'Alba, Gavi</div>
                    <div class="wine-list-item">Tuscany: Toscana, Chianti, Chianti Classico, Bolgheri, Brunello di Montalcino, Vino Nobile di Montepulciano</div>
                    <div class="wine-list-item">Marche: Verdicchio dei Castelli di Jesi</div>
                    <div class="wine-list-item">Umbria: Orvieto</div>
                    <div class="wine-list-item">Lazio: Frascati</div>
                    <div class="wine-list-item">Abruzzo: Montepulciano d'Abruzzo</div>
                    <div class="wine-list-item">Campania: Taurasi, Fiano di Avellino, Greco di Tufo</div>
                    <div class="wine-list-item">Puglia: Puglia, Salice Salentino</div>
                    <div class="wine-list-item">Basilicata: Aglianico del Vulture</div>
                    <div class="wine-list-item">Sicily: Sicilia, Terre di Sicilia/Terre Siciliane, Etna</div>
                    
                    <!-- SPAIN -->
                    <div class="wine-list-region">SPAIN</div>
                    <div class="wine-list-item">The Upper Ebro: Rioja, Navarra, Calatayud, Cariñena</div>
                    <div class="wine-list-item">Catalunya: Priorat, Catalunya, Penedès</div>
                    <div class="wine-list-item">The Duero Valley: Ribera del Duero, Toro, Rueda</div>
                    <div class="wine-list-item">The North West: Rías Baixas, Bierzo</div>
                    <div class="wine-list-item">The Levante: Valencia, Jumilla, Yecla</div>
                    <div class="wine-list-item">Castilla-La Mancha: La Mancha, Valdepeñas</div>
                    <div class="wine-list-item">Castilla y León VdlT</div>
                    
                    <!-- PORTUGAL -->
                    <div class="wine-list-region">PORTUGAL</div>
                    <div class="wine-list-item">Vinho Verde, Douro, Dão, Bairrada, Alentejo, Lisboa, Alentejano</div>
                    
                    <!-- USA -->
                    <div class="wine-list-region">UNITED STATES OF AMERICA</div>
                    <div class="wine-list-item">California, Napa County, Napa Valley, Rutherford, Oakville, Stags Leap District, Howell Mountain, Mount Veeder, Los Carneros, Saint Helena, Calistoga</div>
                    <div class="wine-list-item">Sonoma County, Russian River Valley, Alexander Valley, Dry Creek Valley, Sonoma Coast</div>
                    <div class="wine-list-item">Mendocino County</div>
                    <div class="wine-list-item">Santa Cruz Mountains</div>
                    <div class="wine-list-item">Monterey</div>
                    <div class="wine-list-item">San Luis Obispo County, Paso Robles</div>
                    <div class="wine-list-item">Santa Barbara County, Santa Maria Valley</div>
                    <div class="wine-list-item">Lodi</div>
                    <div class="wine-list-item">Oregon: Willamette Valley</div>
                    <div class="wine-list-item">Washington: Columbia Valley, Yakima Valley</div>
                    <div class="wine-list-item">New York: Finger Lakes</div>
                    
                    <!-- CANADA -->
                    <div class="wine-list-region">CANADA</div>
                    <div class="wine-list-item">Ontario: Niagara Peninsula</div>
                    <div class="wine-list-item">British Columbia: Okanagan Valley</div>
                </div>
                
                <div id="moreWines" style="display: none;">
                    <!-- CHILE -->
                    <div class="wine-list-region">CHILE</div>
                    <div class="wine-list-item">Coquimbo Region: Elqui Valley, Limarí Valley</div>
                    <div class="wine-list-item">Aconcagua Region: Casablanca Valley, San Antonio Valley, Leyda Valley, Aconcagua Valley</div>
                    <div class="wine-list-item">Central Valley Region: Cachapoal Valley, Colchagua Valley, Maipo Valley, Curicó Valley, Maule Valley</div>
                    <div class="wine-list-item">Southern Region</div>
                    
                    <!-- ARGENTINA -->
                    <div class="wine-list-region">ARGENTINA</div>
                    <div class="wine-list-item">Salta: Cafayate</div>
                    <div class="wine-list-item">San Juan</div>
                    <div class="wine-list-item">Mendoza: Uco Valley, Luján de Cuyo, Maipú</div>
                    <div class="wine-list-item">Patagonia</div>
                    
                    <!-- SOUTH AFRICA -->
                    <div class="wine-list-region">SOUTH AFRICA</div>
                    <div class="wine-list-item">Western Cape</div>
                    <div class="wine-list-item">Coastal Region: Stellenbosch, Paarl, Constantia, Durbanville, Swartland</div>
                    <div class="wine-list-item">Breede River Valley: Worcester, Robertson</div>
                    <div class="wine-list-item">Cape South Coast: Walker Bay, Hemel-en-Aarde Wards, Elim, Elgin</div>
                    
                    <!-- AUSTRALIA -->
                    <div class="wine-list-region">AUSTRALIA</div>
                    <div class="wine-list-item">South Eastern Australia: Murray-Darling, Riverina, Riverland</div>
                    <div class="wine-list-item">South Australia: Barossa, Barossa Valley, Eden Valley, Clare Valley, Adelaide Hills, McLaren Vale, Coonawarra</div>
                    <div class="wine-list-item">Victoria: Yarra Valley, Geelong, Mornington Peninsula, Heathcote, Goulburn Valley</div>
                    <div class="wine-list-item">New South Wales: Hunter Valley</div>
                    <div class="wine-list-item">Tasmania</div>
                    <div class="wine-list-item">Western Australia: Margaret River, Great Southern</div>
                    
                    <!-- NEW ZEALAND -->
                    <div class="wine-list-region">NEW ZEALAND</div>
                    <div class="wine-list-item">North Island: Gisborne, Hawke's Bay, Martinborough</div>
                    <div class="wine-list-item">South Island: Marlborough, Nelson, Canterbury, Central Otago</div>
                    
                    <!-- SPARKLING WINES -->
                    <div class="wine-list-section">
                        <h3>Sparkling Wines</h3>
                        
                        <div class="wine-list-region">FRANCE</div>
                        <div class="wine-list-item">Champagne: Montagne de Reims, Côte des Blancs, Vallée de la Marne, Côte des Bar, Côte de Sézanne</div>
                        <div class="wine-list-item">Crémant: Crémant d'Alsace, Crémant de Bourgogne, Crémant de Loire</div>
                        <div class="wine-list-item">The Loire Valley: Saumur, Vouvray</div>
                        
                        <div class="wine-list-region">SPAIN</div>
                        <div class="wine-list-item">Cava</div>
                        
                        <div class="wine-list-region">ITALY</div>
                        <div class="wine-list-item">Asti</div>
                        <div class="wine-list-item">Prosecco: Prosecco, Conegliano-Valdobbiadene</div>
                        
                        <div class="wine-list-region">OTHER COUNTRIES</div>
                        <div class="wine-list-item">Germany: Sekt, Deutscher Sekt</div>
                        <div class="wine-list-item">Australia: Tasmania, Yarra Valley, Adelaide Hills</div>
                        <div class="wine-list-item">New Zealand: Marlborough</div>
                        <div class="wine-list-item">South Africa: Cap Classique</div>
                        <div class="wine-list-item">USA: Anderson Valley, Los Carneros</div>
                    </div>
                    
                    <!-- FORTIFIED WINES -->
                    <div class="wine-list-section">
                        <h3>Fortified Wines</h3>
                        
                        <div class="wine-list-region">PORTUGAL</div>
                        <div class="wine-list-item">Port</div>
                        
                        <div class="wine-list-region">SPAIN</div>
                        <div class="wine-list-item">Sherry</div>
                        
                        <div class="wine-list-region">FORTIFIED MUSCATS</div>
                        <div class="wine-list-item">France: Muscat de Beaumes-de-Venise</div>
                        <div class="wine-list-item">Australia: Rutherglen</div>
                    </div>
                </div>
            </div>
            
            <button onclick="toggleMoreWines()" id="loadMoreBtn">Load More Wines</button>
        </div>
    </div>

    <script>
// All JavaScript code goes here
...
</script>
    // Create filtered lists by type
const wineList = {
    all: wineDatabase.map(wine => wine.name),
    red: wineDatabase.filter(wine => wine.type === "red").map(wine => wine.name),
    white: wineDatabase.filter(wine => wine.type === "white").map(wine => wine.name),
    sparkling: wineDatabase.filter(wine => wine.type === "sparkling").map(wine => wine.name),
    fortified: wineDatabase.filter(wine => wine.type === "fortified").map(wine => wine.name)
};

// Initialize variables
let selectedWines = JSON.parse(localStorage.getItem('selectedWines')) || [];
const resultDiv = document.getElementById('result');
const historyList = document.getElementById('historyList');
const categorySelect = document.getElementById('category');
const countrySelect = document.getElementById('country');
const regionSelect = document.getElementById('region');

// Populate countries dropdown
function populateCountries() {
    const countries = [...new Set(wineDatabase.map(wine => wine.country))].sort();
    countrySelect.innerHTML = '<option value="all">All Countries</option>';
    
    countries.forEach(country => {
        const option = document.createElement('option');
        option.value = country;
        option.textContent = country;
        countrySelect.appendChild(option);
    });
}

// Populate regions dropdown based on selected country
function populateRegions(selectedCountry) {
    let regions;
    
    if (selectedCountry === 'all') {
        regions = [...new Set(wineDatabase.map(wine => wine.region))].sort();
    } else {
        regions = [...new Set(wineDatabase
            .filter(wine => wine.country === selectedCountry)
            .map(wine => wine.region))].sort();
    }
    
    regionSelect.innerHTML = '<option value="all">All Regions</option>';
    
    regions.forEach(region => {
        const option = document.createElement('option');
        option.value = region;
        option.textContent = region;
        regionSelect.appendChild(option);
    });
}

// Initialize dropdowns
populateCountries();
populateRegions('all');

// Handle country change
countrySelect.addEventListener('change', function() {
    populateRegions(this.value);
});

// Tab functionality
function openTab(tabName) {
    const tabContents = document.getElementsByClassName('tab-content');
    for (let i = 0; i < tabContents.length; i++) {
        tabContents[i].classList.remove('active');
    }
    
    const tabs = document.getElementsByClassName('tab');
    for (let i = 0; i < tabs.length; i++) {
        tabs[i].classList.remove('active');
    }
    
    document.getElementById(tabName).classList.add('active');
    event.currentTarget.classList.add('active');
}

// Toggle more wines
function toggleMoreWines() {
    const moreWines = document.getElementById('moreWines');
    const loadMoreBtn = document.getElementById('loadMoreBtn');
    
    if (moreWines.style.display === 'none') {
        moreWines.style.display = 'block';
        loadMoreBtn.textContent = 'Show Less';
    } else {
        moreWines.style.display = 'none';
        loadMoreBtn.textContent = 'Load More Wines';
    }
}

// Generate random wine button event
document.getElementById('generateBtn').addEventListener('click', function() {
    const selectedType = categorySelect.value;
    const selectedCountry = countrySelect.value;
    const selectedRegion = regionSelect.value;
    
    // Filter wines based on selections
    let filteredWines = wineDatabase;
    
    if (selectedType !== 'all') {
        filteredWines = filteredWines.filter(wine => wine.type === selectedType);
    }
    
    if (selectedCountry !== 'all') {
        filteredWines = filteredWines.filter(wine => wine.country === selectedCountry);
    }
    
    if (selectedRegion !== 'all') {
        filteredWines = filteredWines.filter(wine => wine.region === selectedRegion);
    }
    
    // Get wine names and filter out already selected ones
    const wineNames = filteredWines.map(wine => wine.name);
    const availableWines = wineNames.filter(wine => !selectedWines.includes(wine));
    
    if (availableWines.length === 0) {
        resultDiv.innerHTML = "All wines from this category have been selected! Reset history to start over.";
        return;
    }
    
    const randomIndex = Math.floor(Math.random() * availableWines.length);
    const randomWine = availableWines[randomIndex];
    
    resultDiv.innerHTML = `<strong>${randomWine}</strong>`;
    
    // Add to history
    selectedWines.push(randomWine);
    localStorage.setItem('selectedWines', JSON.stringify(selectedWines));
    
    // Update history list
    updateHistoryList();
});

// Reset history button event
document.getElementById('resetBtn').addEventListener('click', function() {
    selectedWines = [];
    localStorage.setItem('selectedWines', JSON.stringify(selectedWines));
    resultDiv.innerHTML = "Your randomly selected wine will appear here";
    updateHistoryList();
});

// Function to update history list
function updateHistoryList() {
    if (selectedWines.length === 0) {
        historyList.innerHTML = '<div class="history-item">No wines selected yet</div>';
        return;
    }
    
    historyList.innerHTML = '';
    selectedWines.slice().reverse().forEach(wine => {
        const item = document.createElement('div');
        item.className = 'history-item';
        item.textContent = wine;
        historyList.appendChild(item);
    });
}

// Initialize history list on page load
updateHistoryList();
</body>
</html>
